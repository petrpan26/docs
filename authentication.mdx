---
title: "Authentication"
description: "Learn how to authenticate with the Viggle API"
---

## API Keys

All API requests require an API key passed in the Authorization header. The only exceptions are health check endpoints (`/health`, `/healthz`) and the job status endpoint (`GET /api/render/{job_id}`).

API keys can be created in your [Viggle Dashboard](https://viggle.ai/dashboard).

## Authentication Header

Include your API key in every request using the `Authorization` header with a Bearer token:

```bash
Authorization: Bearer YOUR_API_KEY
```

## Authenticated Endpoints

| Endpoint | Auth Required |
|----------|---------------|
| `POST /api/render` | Yes |
| `GET /api/render/{job_id}` | No |
| `GET /api/render/{job_id}/poll` | Yes |
| `GET /api/render/{job_id}/chunks/{chunk_id}.mp4` | Yes |
| `GET /api/render/{job_id}/download` | Yes |
| `DELETE /api/render/{job_id}` | Yes |
| `GET /health`, `/healthz` | No |

## Example Request

<CodeGroup>

```bash cURL
curl -X POST "https://api.viggle.ai/api/render" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -d "character_id=char_xxx&scene_id=scene_xxx"
```

```python Python
import requests

response = requests.post(
    "https://api.viggle.ai/api/render",
    headers={"Authorization": "Bearer YOUR_API_KEY"},
    data={"character_id": "char_xxx", "scene_id": "scene_xxx"}
)
print(response.json())
```

```javascript JavaScript
const form = new URLSearchParams();
form.append("character_id", "char_xxx");
form.append("scene_id", "scene_xxx");

const response = await fetch("https://api.viggle.ai/api/render", {
  method: "POST",
  headers: { "Authorization": `Bearer ${API_KEY}` },
  body: form
});
const data = await response.json();
```

</CodeGroup>

## Security Best Practices

<Warning>
  **Keep your API key secure**

  Never expose your API key in client-side code or public repositories. API keys should only be used in server-side applications.
</Warning>

<AccordionGroup>
  <Accordion title="Use environment variables">
    Store your API key in environment variables instead of hardcoding it.

    ```bash
    export VIGGLE_API_KEY="your-api-key-here"
    ```

    ```python
    import os
    api_key = os.environ.get("VIGGLE_API_KEY")
    ```
  </Accordion>
  <Accordion title="Rotate keys regularly">
    Periodically rotate your API keys, especially if you suspect they may have been compromised.
  </Accordion>
  <Accordion title="Use separate keys for environments">
    Use different API keys for development, staging, and production environments.
  </Accordion>
</AccordionGroup>

## Error Responses

If authentication fails, you'll receive a `401 Unauthorized` response:

```json
{
  "detail": "API key required. Use Authorization: Bearer sk-xxx"
}
```

| Error | Cause | Solution |
|-------|-------|----------|
| `401 Unauthorized` | Missing or invalid API key | Include `Authorization: Bearer sk-xxx` header |
| `401 Unauthorized` | Expired API key | Generate a new API key in your dashboard |
| `402 Payment Required` | Insufficient credits | Add more credits in your dashboard |
