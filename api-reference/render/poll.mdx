---
title: 'Poll for Chunks (Live Render)'
api: 'GET /api/render/{job_id}/poll'
description: 'Long-poll for video chunks as they render'
---

Long-poll for new video chunks. Blocks until chunks are ready, job completes, or timeout. Use for real-time progressive playback.

<Note>
  This endpoint requires authentication. Include your API key in the `Authorization: Bearer` header.
</Note>

## Path Parameters

<ParamField path="job_id" type="string" required>
  The render job ID
</ParamField>

## Query Parameters

<ParamField query="last_chunk" type="integer" default="-1">
  Return chunks after this chunk ID. Use `-1` for first poll.
</ParamField>

<ParamField query="timeout" type="integer" default="30">
  Max seconds to wait. Default: 30, Max: 60
</ParamField>

## Response

<ResponseField name="status" type="string">
  Current job status: `queued`, `processing`, `rendering`, `merging`, `complete`, or `failed`
</ResponseField>

<ResponseField name="new_chunks" type="array">
  Array of new video chunks since `last_chunk`

  <Expandable title="Chunk object">
    <ResponseField name="chunk_id" type="integer">
      Chunk identifier
    </ResponseField>
    <ResponseField name="cdn_url" type="string">
      CDN URL to download this chunk
    </ResponseField>
  </Expandable>
</ResponseField>

<ResponseField name="completed_chunks" type="integer">
  Number of completed chunks
</ResponseField>

<ResponseField name="total_chunks" type="integer">
  Total number of chunks
</ResponseField>

<ResponseField name="cdn_url" type="string">
  CDN URL to complete video (when status is `complete`)
</ResponseField>

<ResponseField name="mask_cdn_url" type="string">
  CDN URL for mask video (when status is `complete` and `background_mode=transparent` was used)
</ResponseField>

<ResponseField name="error" type="string">
  Error message (when status is `failed`)
</ResponseField>

<RequestExample>

```bash cURL
curl "https://apis.viggle.ai/api/render/job_abc123xyz/poll?last_chunk=-1&timeout=30" \
  -H "Authorization: Bearer YOUR_API_KEY"
```

```python Python
import requests

API_KEY = "your-api-key"
BASE = "https://apis.viggle.ai"
headers = {"Authorization": f"Bearer {API_KEY}"}

job_id = "job_abc123xyz"
last_chunk = -1

while True:
    resp = requests.get(
        f"{BASE}/api/render/{job_id}/poll",
        headers=headers,
        params={"last_chunk": last_chunk, "timeout": 30}
    ).json()

    # Play new chunks immediately
    for chunk in resp["new_chunks"]:
        print(f"Chunk {chunk['chunk_id']}: {chunk['cdn_url']}")
        last_chunk = max(last_chunk, chunk["chunk_id"])

    if resp["status"] == "complete":
        print(f"Done! Video: {resp['cdn_url']}")
        break
    elif resp["status"] == "failed":
        raise Exception(resp["error"])
```

```javascript JavaScript
const jobId = "job_abc123xyz";
let lastChunk = -1;

while (true) {
  const response = await fetch(
    `https://apis.viggle.ai/api/render/${jobId}/poll?last_chunk=${lastChunk}&timeout=30`,
    { headers: { "Authorization": `Bearer ${API_KEY}` } }
  );
  const data = await response.json();

  // Play new chunks immediately
  for (const chunk of data.new_chunks) {
    console.log(`Chunk ${chunk.chunk_id}: ${chunk.cdn_url}`);
    lastChunk = Math.max(lastChunk, chunk.chunk_id);
  }

  if (data.status === "complete") {
    console.log(`Done! Video: ${data.cdn_url}`);
    break;
  } else if (data.status === "failed") {
    throw new Error(data.error);
  }
}
```

</RequestExample>

<ResponseExample>

```json Rendering
{
  "status": "rendering",
  "new_chunks": [
    { "chunk_id": 0, "cdn_url": "https://assets.viggle.ai/chunks/..." },
    { "chunk_id": 1, "cdn_url": "https://assets.viggle.ai/chunks/..." }
  ],
  "completed_chunks": 2,
  "total_chunks": 5
}
```

```json Queued
{
  "status": "queued",
  "new_chunks": [],
  "completed_chunks": 0,
  "total_chunks": 5
}
```

```json Complete
{
  "status": "complete",
  "new_chunks": [],
  "completed_chunks": 5,
  "total_chunks": 5,
  "cdn_url": "https://assets.viggle.ai/videos/..."
}
```

```json Failed
{
  "status": "failed",
  "error": "Render failed: Processing failed"
}
```

</ResponseExample>
