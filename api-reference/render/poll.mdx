---
title: 'Poll for Chunks (Live Render)'
api: 'GET /api/render/{job_id}/poll'
description: 'Long-poll for video chunks as they render'
---

Long-poll for new video chunks. Blocks until chunks are ready, job completes, or timeout. Use for real-time progressive playback.

## Path Parameters

<ParamField path="job_id" type="string" required>
  The render job ID
</ParamField>

## Query Parameters

<ParamField query="after" type="integer" default="-1">
  Return chunks after this index. Use `-1` for first poll.
</ParamField>

<ParamField query="timeout" type="integer" default="30">
  Max seconds to wait. Default: 30, Max: 60
</ParamField>

## Response

<ResponseField name="status" type="string">
  Current job status: `queued`, `processing`, `rendering`, `complete`, or `failed`
</ResponseField>

<ResponseField name="chunks" type="array">
  Array of new video chunks since `after` index
  
  <Expandable title="Chunk object">
    <ResponseField name="index" type="integer">
      Chunk index (0-based)
    </ResponseField>
    <ResponseField name="url" type="string">
      URL to download this chunk
    </ResponseField>
  </Expandable>
</ResponseField>

<ResponseField name="progress" type="object">
  Rendering progress
  
  <Expandable title="Progress object">
    <ResponseField name="completed" type="integer">
      Number of completed chunks
    </ResponseField>
    <ResponseField name="total" type="integer">
      Total number of chunks
    </ResponseField>
  </Expandable>
</ResponseField>

<ResponseField name="queue_position" type="integer">
  Position in queue (when status is `queued`)
</ResponseField>

<ResponseField name="video_url" type="string">
  URL to complete video (when status is `complete`)
</ResponseField>

<ResponseField name="error" type="string">
  Error message (when status is `failed`)
</ResponseField>

<RequestExample>

```bash cURL
curl "https://api.viggle.ai/api/render/job_abc123xyz/poll?after=-1&timeout=30" \
  -H "Authorization: Bearer YOUR_API_KEY"
```

```python Python
import requests

API_KEY = "your-api-key"
BASE = "https://api.viggle.ai"
headers = {"Authorization": f"Bearer {API_KEY}"}

job_id = "job_abc123xyz"
last_chunk = -1

while True:
    resp = requests.get(
        f"{BASE}/api/render/{job_id}/poll",
        headers=headers,
        params={"after": last_chunk, "timeout": 30}
    ).json()
    
    # Play new chunks immediately
    for chunk in resp["chunks"]:
        print(f"Chunk {chunk['index']}: {chunk['url']}")
        last_chunk = max(last_chunk, chunk["index"])
    
    if resp["status"] == "complete":
        print(f"Done! Video: {resp['video_url']}")
        break
    elif resp["status"] == "failed":
        raise Exception(resp["error"])
```

```javascript JavaScript
const jobId = "job_abc123xyz";
let lastChunk = -1;

while (true) {
  const response = await fetch(
    `https://api.viggle.ai/api/render/${jobId}/poll?after=${lastChunk}&timeout=30`,
    { headers: { "Authorization": `Bearer ${API_KEY}` } }
  );
  const data = await response.json();
  
  // Play new chunks immediately
  for (const chunk of data.chunks) {
    console.log(`Chunk ${chunk.index}: ${chunk.url}`);
    lastChunk = Math.max(lastChunk, chunk.index);
  }
  
  if (data.status === "complete") {
    console.log(`Done! Video: ${data.video_url}`);
    break;
  } else if (data.status === "failed") {
    throw new Error(data.error);
  }
}
```

</RequestExample>

<ResponseExample>

```json Rendering
{
  "status": "rendering",
  "chunks": [
    { "index": 0, "url": "https://assets.viggle.ai/chunks/..." },
    { "index": 1, "url": "https://assets.viggle.ai/chunks/..." }
  ],
  "progress": { "completed": 2, "total": 5 }
}
```

```json Queued
{
  "status": "queued",
  "queue_position": 3,
  "chunks": [],
  "progress": { "completed": 0, "total": 5 }
}
```

```json Complete
{
  "status": "complete",
  "chunks": [],
  "progress": { "completed": 5, "total": 5 },
  "video_url": "https://assets.viggle.ai/videos/..."
}
```

```json Failed
{
  "status": "failed",
  "error": "Render failed: GPU memory exceeded"
}
```

</ResponseExample>
