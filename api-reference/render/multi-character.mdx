---
title: 'Multi-Character Render'
api: 'POST /api/render'
description: 'Render a multi-person template scene with different avatars'
---

Render a multi-person template scene with different avatars for each tracked person. Map each segment UUID to a different character using form-data fields.

<Note>
  This endpoint requires authentication. Include your API key in the `Authorization: Bearer` header.
</Note>

<Info>
  **How Character Mapping Works**

  Each person in the scene has a segment UUID from the template. Use `character_mapping` to assign different avatars to each person. The mapping is passed as a JSON string in a form field.
</Info>

## Request

Parameters are sent as form fields (`multipart/form-data`).

<ParamField body="scene_id" type="string" required>
  ID of a multi-person template scene with segments.
</ParamField>

<ParamField body="character_mapping" type="string (JSON)" required>
  JSON string mapping segment UUIDs to character IDs. Each segment gets a different avatar.

  ```
  {"person_a1b2c3d4": "char_alice", "person_e5f6g7h8": "char_bob"}
  ```
</ParamField>

<ParamField body="model" type="string" default="V4_Preview">
  Rendering model. Currently only `V4_Preview` is available.
</ParamField>

<ParamField body="background_mode" type="string" default="inpainted">
  `inpainted`, `original`, `solid`, or `transparent`
</ParamField>

<ParamField body="bg_color" type="string">
  RGB string for solid background, e.g., `"0,255,0"`. Only used when `background_mode` is `solid`.
</ParamField>

<ParamField body="resolution" type="string" default="SD">
  Output resolution: `SD` or `HD`.
</ParamField>

<ParamField body="fast" type="boolean" default="false">
  Enable fast mode for faster rendering.
</ParamField>

## Response

<ResponseField name="job_id" type="string">
  Unique identifier for the render job
</ResponseField>

<ResponseField name="status" type="string">
  Initial status will be `queued`
</ResponseField>

<RequestExample>

```bash cURL
# Map different avatars to each person in the scene
curl -X POST "https://apis.viggle.ai/api/render" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -d "scene_id=scene_770e8400e29b41d4" \
  -d 'character_mapping={"person_a1b2c3d4":"char_alice","person_e5f6g7h8":"char_bob","person_i9j0k1l2":"char_carol"}' \
  -d "background_mode=inpainted"
```

```python Python
import requests
import json

# Map each person to a different character avatar
character_mapping = {
    "person_a1b2c3d4": "char_alice",
    "person_e5f6g7h8": "char_bob",
    "person_i9j0k1l2": "char_carol"
}

response = requests.post(
    "https://apis.viggle.ai/api/render",
    headers={"Authorization": "Bearer YOUR_API_KEY"},
    data={
        "scene_id": "scene_770e8400e29b41d4",
        "character_mapping": json.dumps(character_mapping),
        "background_mode": "inpainted"
    }
)
job = response.json()
print(f"Multi-character job: {job['job_id']}")
```

```javascript JavaScript
const characterMapping = {
  "person_a1b2c3d4": "char_alice",
  "person_e5f6g7h8": "char_bob",
  "person_i9j0k1l2": "char_carol"
};

const form = new URLSearchParams();
form.append("scene_id", "scene_770e8400e29b41d4");
form.append("character_mapping", JSON.stringify(characterMapping));
form.append("background_mode", "inpaint");

const response = await fetch("https://apis.viggle.ai/api/render", {
  method: "POST",
  headers: { "Authorization": `Bearer ${API_KEY}` },
  body: form
});
const job = await response.json();
console.log(`Multi-character job: ${job.job_id}`);
```

</RequestExample>

<ResponseExample>

```json 200
{
  "job_id": "job_multi_xyz789",
  "status": "queued"
}
```

</ResponseExample>

## Mapping Options

### Partial Mapping

You don't need to map all segments. Unmapped people retain their original appearance:

```bash
curl -X POST "https://apis.viggle.ai/api/render" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -d "scene_id=scene_770e8400e29b41d4" \
  -d 'character_mapping={"person_a1b2c3d4":"char_alice"}'
# person_e5f6g7h8 and person_i9j0k1l2 keep original appearance
```

### Same Avatar for Multiple People

Map multiple segments to the same character ID:

```bash
curl -X POST "https://apis.viggle.ai/api/render" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -d "scene_id=scene_770e8400e29b41d4" \
  -d 'character_mapping={"person_a1b2c3d4":"char_alice","person_e5f6g7h8":"char_alice","person_i9j0k1l2":"char_bob"}'
```

## Complete Workflow

<Steps>
  <Step title="Obtain your character and scene IDs">
    Get preprocessed character IDs and multi-person template scene ID from the Viggle platform. The scene should have segment UUIDs for each tracked person.
  </Step>
  <Step title="Create character mapping">
    ```python
    import json

    character_mapping = {
        "person_a1b2c3d4": "char_alice",
        "person_e5f6g7h8": "char_bob"
    }
    ```
  </Step>
  <Step title="Start render job">
    ```python
    job = requests.post(
        f"{BASE}/api/render",
        headers=headers,
        data={
            "scene_id": scene_id,
            "character_mapping": json.dumps(character_mapping),
            "background_mode": "inpainted"
        }
    ).json()
    ```
  </Step>
  <Step title="Poll for completion and download">
    ```python
    # Status endpoint is open (no auth needed)
    while True:
        status = requests.get(f"{BASE}/api/render/{job['job_id']}").json()
        if status["status"] == "complete":
            break
        time.sleep(5)

    # Download requires auth
    video = requests.get(
        f"{BASE}/api/render/{job['job_id']}/download",
        headers=headers
    )
    with open("output.mp4", "wb") as f:
        f.write(video.content)
    ```
  </Step>
</Steps>
